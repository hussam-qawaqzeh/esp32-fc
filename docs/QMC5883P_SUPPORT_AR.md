# ุงูุชุญูู ูู ุฏุนู ุญุณุงุณ ุงููุบูุงุทูุณูุฉ QMC5883P

## ูุธุฑุฉ ุนุงูุฉ
ูุฐุง ุงููุณุชูุฏ ูุชุญูู ูู ุฏุนู ุญุณุงุณ ุงููุบูุงุทูุณูุฉ QMC5883P ูู ุจุฑูุงูุฌ ุงูุชุญูู ุจุงูุทูุฑุงู ESP32-FC.

## ุญุงูุฉ ุงูุฏุนู: โ ูุฏุนูู ุจุงููุงูู

ุญุณุงุณ ุงููุบูุงุทูุณูุฉ QMC5883P ูุฏุนูู ุจุงููุงูู ูููุทุจู ูู ุจุฑูุงูุฌ ESP32-FC.

## ุชูุงุตูู ุงูุชุทุจูู

### 1. ูุฆุฉ ุงูุฌูุงุฒ
- **ุงูููู**: `lib/Espfc/src/Device/MagQMC5338P.h`
- **ุงููุฆุฉ**: `MagQMC5338P` (ููุงุญุธุฉ: ุงููุฆุฉ ุชุณุชุฎุฏู ุงุตุทูุงุญ ุงูุชุณููุฉ "5338"ุ ููููุง ุชุทุจู ุญุณุงุณ QMC5883P)
- **ุงููุฆุฉ ุงูุฃุณุงุณูุฉ**: `MagDevice`

### 2. ุงูุชูููู
- **ุนููุงู I2C**: `0x2C`
- **ูุนุฑู ุงูุดุฑูุญุฉ**: `0x80`
- **ูุถุน ุงูุชุดุบูู**: ูุถุน ุงูููุงุณ ุงููุณุชูุฑ
- **ูุนุฏู ุฅุฎุฑุงุฌ ุงูุจูุงูุงุช**: 100 ูุฑุชุฒ
- **ุงููุทุงู ุงูุงูุชุฑุงุถู**: ยฑ8 ุบุงูุณ

### 3. ุงููุทุงูุงุช ุงููุฏุนููุฉ
ูุฏุนู QMC5883P ุฃุฑุจุนุฉ ูุทุงูุงุช ููุงุณ:
- ยฑ30 ุบุงูุณ (LSB/Gauss: 1000.0)
- ยฑ12 ุบุงูุณ (LSB/Gauss: 2500.0)
- ยฑ8 ุบุงูุณ (LSB/Gauss: 3750.0) - **ุงูุชุฑุงุถู**
- ยฑ2 ุบุงูุณ (LSB/Gauss: 15000.0)

### 4. ุงูุชุดุงู ุงูุฌูุงุฒ
ูุชู ุงูุชุดุงู QMC5883P ุชููุงุฆูุงู ุฃุซูุงุก ุชููุฆุฉ ุงูุฃุฌูุฒุฉ ุจุงูุชุฑุชูุจ ุงูุชุงูู:
1. ูุงูู I2C (ุฅุฐุง ุชู ุชููููู)
2. ูุงูู ุฌูุงุฒ ุงูุฌูุฑู ุงููุฑุนู (ููุญุฏุงุช MPU9250)

### 5. ุชุณูุณู ุงูุชููุฆุฉ
ุชุชุจุน ุงูุชููุฆุฉ ูุฐู ุงูุฎุทูุงุช:
1. **Set/Reset**: ูุชุงุจุฉ `0x29` ุฅูู ุณุฌู Z_MSB (ุชูุนูู Set/Reset)
2. **ุชุนููู ุงููุทุงู**: ุชูููู ุณุฌู CONTROL2 ุจุฅุนุฏุงุฏ ุงููุทุงู (ุงูุจุชุงุช [3:2])
3. **ุชูููู CONTROL1**: ุชุนููู ุงููุถุน ุงููุณุชูุฑุ ODR=100Hzุ OSR=1ุ DSR=1
4. **ูุฑุงุกุฉ ุฃูููุฉ**: ุฅุฌุฑุงุก ูุฑุงุกุฉ ููููุฉ ููุณุญ ุณุฌูุงุช ุงูุจูุงูุงุช

### 6. ูุฑุงุกุฉ ุงูุจูุงูุงุช
- ูุฑุงุกุฉ 6 ุจุงูุชุงุช ุจุฏุกุงู ูู ุงูุณุฌู `0x01` (XOUT_LSB)
- ุชูุณูู ุงูุจูุงูุงุช: LSB ุฃููุงูุ ุซู MSB ููู ูุญูุฑ (Xุ Yุ Z)
- ุฅุฑุฌุงุน ููู ุตุญูุญุฉ 16-ุจุช ูููุนุฉ ููู ูุญูุฑ

## ููุงุฑูุฉ ูุน QMC5883L

| ุงูููุฒุฉ | QMC5883L | QMC5883P |
|---------|----------|----------|
| ุนููุงู I2C | 0x0D | 0x2C |
| ูุนุฑู ุงูุดุฑูุญุฉ | 0xFF | 0x80 |
| ุงููุทุงูุงุช | 2 (ยฑ2Gุ ยฑ8G) | 4 (ยฑ2Gุ ยฑ8Gุ ยฑ12Gุ ยฑ30G) |
| ูุนุฏู ุงูุจูุงูุงุช | 100Hz | 100Hz |
| ุงูุชููุฆุฉ | ุฃุจุณุท | ูุชุทูุจ Set/Reset |

## ุงููุดุงูู ุงููุญุชููุฉ ูุงูุชูุตูุงุช

### 1. โ ุญุงูุฉ ุงูุชุทุจูู
QMC5883P ููุทุจู ุจุดูู ุตุญูุญ ูุน:
- ุชุนุฑููุงุช ุงูุณุฌูุงุช ุงูุตุญูุญุฉ
- ุชุณูุณู ุชููุฆุฉ ููุงุณุจ ูุชุถูู Set/Reset
- ุนูุงูู ููุงุณ ููุงุณุจุฉ ูุฌููุน ุงููุทุงูุงุช
- ุงูุชุญูู ูู ูุนุฑู ุงูุดุฑูุญุฉ

### 2. ๐ ููุงุทู ุชุญุชุงุฌ ูููุฑุงูุจุฉ

#### ุงููุดููุฉ ุฃ: ูุญุต ุฌุงูุฒูุฉ ุงูุจูุงูุงุช
**ุงูุญุงูุฉ**: ุบูุฑ ููุทุจู
**ุงููุตู**: ุงูุชุทุจูู ุงูุญุงูู ูุง ููุญุต ุณุฌู STATUS ูุจู ูุฑุงุกุฉ ุงูุจูุงูุงุช.
**ุงูุชุฃุซูุฑ**: ููุฎูุถ - ุงููุถุน ุงููุณุชูุฑ ูุฌุจ ุฃู ูููุฑ ุชุญุฏูุซุงุช ููุชุธูุฉ
**ุงูุชูุตูุฉ**: ุงููุธุฑ ูู ุฅุถุงูุฉ ูุญุต ุงูุญุงูุฉ ุฅุฐุง ูุงูุช ุงูุชุทุจููุงุช ุงูุญุณุงุณุฉ ููุชูููุช ุชุญุชุงุฌ ููุชุญูู

#### ุงููุดููุฉ ุจ: ุชุนููุถ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ
**ุงูุญุงูุฉ**: ุบูุฑ ููุทุจู
**ุงููุตู**: QMC5883P ูุฏูู ุณุฌูุงุช ุญุฑุงุฑุฉ ููููุง ุบูุฑ ูุณุชุฎุฏูุฉ
**ุงูุชุฃุซูุฑ**: ููุฎูุถ - ุงูุงูุฌุฑุงู ุงูุญุฑุงุฑู ููุฏุงุฑ ุนุงุฏุฉ ุจุงููุนุงูุฑุฉ
**ุงูุชูุตูุฉ**: ูุฏ ูุง ูููู ุถุฑูุฑูุงู ูุงุณุชุฎุฏุงู ูุชุญูู ุงูุทูุฑุงู ุงููููุฐุฌู

#### ุงููุดููุฉ ุฌ: ุงูุชุดุงู ุงูููุถ
**ุงูุญุงูุฉ**: ุบูุฑ ููุทุจู
**ุงููุตู**: ูุง ููุฌุฏ ุงูุชุดุงู ููููุถ/ุงูููุต ูู ุณุฌู STATUS
**ุงูุชุฃุซูุฑ**: ููุฎูุถ - ุงููุทุงู ุงูุงูุชุฑุงุถู ยฑ8G ูุงูู ููุนุธู ุงูุชุทุจููุงุช
**ุงูุชูุตูุฉ**: ุงููุฑุงูุจุฉ ุฅุฐุง ุญุฏุซุช ูุฑุงุกุงุช ุบูุฑ ุนุงุฏูุฉ

### 3. โ ุงูููุฒุงุช ุงูููุชุญูู ูููุง
- ุงูุชุดุงู ุงูุฌูุงุฒ ุงูุตุญูุญ ุนุจุฑ ูุนุฑู ุงูุดุฑูุญุฉ (0x80)
- ุนููุงู I2C ุงูุตุญูุญ (0x2C)
- ุชููุฆุฉ Set/Reset ููุงุณุชุดุนุงุฑ ุงูููุงุณุจ ูููุฌุงู ุงููุบูุงุทูุณู
- ุนูุงูู ุงูููุงุณ ุงูููุงุณุจุฉ ุงููุทุงุจูุฉ ูููุงุตูุงุช ูุฑูุฉ ุงูุจูุงูุงุช
- ุงูุชูุงูู ูุน ูุธุงู ุงูุงูุชุดุงู ุงูุชููุงุฆู

## ุชูุตูุงุช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุชูุตูู ุงูุฃุฌูุฒุฉ
```
1. ุชูุตูู QMC5883P ุจูุงูู I2C (SDA/SCL)
2. ุชุดุบูู ูุชุญูู ุงูุทูุฑุงู
3. ุงูุงุชุตุงู ุนุจุฑ Betaflight Configurator
4. ูุญุต CLI ูููุบูุงุทูุณ ุงูููุชุดู
5. ุงูุชุญูู ูู ูุฑุงุกุงุช ุงููุบูุงุทูุณ ูู ุชุจููุจ ุงูุญุณุงุณุงุช
```

### 2. ุฃูุงูุฑ CLI ููุชุญูู
```
# ูุญุต ุงููุบูุงุทูุณ ุงูููุชุดู
get mag

# ุนุฑุถ ุจูุงูุงุช ุงููุบูุงุทูุณ
status
```

### 3. ุงูุณููู ุงููุชููุน
- ูุฌุจ ุงูุชุดุงู ุงููุบูุงุทูุณ ุชููุงุฆูุงู ุนูู ุงูุนููุงู 0x2C
- ูุฌุจ ุฃู ูุธูุฑ ุงุณู ุงูุฌูุงุฒ ูู "QMC5883P" ูู ูุงุฆูุฉ ุงูุฃุฌูุฒุฉ
- ูุฌุจ ุฃู ุชุณุชุฌูุจ ุงููุฑุงุกุงุช ูุชุบููุฑุงุช ุงููุฌุงู ุงููุบูุงุทูุณู
- ูุฌุจ ุฃู ุชููู ุงูููู ุถูู ูุทุงู ูุนููู (ุนุงุฏุฉ -1 ุฅูู +1 ุบุงูุณ ููุฌุงู ุงูุฃุฑุถ)

## ุงูุฎูุงุตุฉ

**ุญุณุงุณ ุงููุบูุงุทูุณูุฉ QMC5883P ูุฏุนูู ุจุงููุงูู** ูู ุจุฑูุงูุฌ ESP32-FC ูุน ุชุทุจูู ูุงูู ูุดูู:
- โ ุงูุชุดุงู ุงูุฌูุงุฒ
- โ ุงูุชููุฆุฉ ุงูุตุญูุญุฉ
- โ ูุฑุงุกุฉ ุงูุจูุงูุงุช
- โ ุงูููุงุณ ูุงูุชุญููู
- โ ุฏุนู ูุทุงูุงุช ูุชุนุฏุฏุฉ
- โ ุงูุชูุงูู ูุน ูุธุงู ุงูุชุดุงู ุงูุฃุฌูุฒุฉ

**ูู ูุชู ุชุญุฏูุฏ ูุดุงูู ุญุฑุฌุฉ.** ุงูุชุทุจูู ูุชุจุน ุฃูุถู ุงูููุงุฑุณุงุช ููุชุถูู ุฎุทูุฉ ุชููุฆุฉ Set/Reset ุงูุถุฑูุฑูุฉ ุงูุฎุงุตุฉ ุจู QMC5883P.

## ูุฑุงุฌุน ุงูุชูุซูู
- ููู README ุงูุฑุฆูุณู: ูุณุฑุฏ QMC5883P ูุญุณุงุณ ูุบูุงุทูุณู ูุฏุนูู (ุณุทุฑ 93)
- ุชุทุจูู ุงูุฌูุงุฒ: `lib/Espfc/src/Device/MagQMC5338P.h`
- ุงูุชุดุงู ุงูุฃุฌูุฒุฉ: `lib/Espfc/src/Hardware.cpp` (ุงูุฃุณุทุฑ 133ุ 141)
- ุณุฌู ุงูุฃุฌูุฒุฉ: `lib/Espfc/src/Device/MagDevice.cpp` (ุณุทุฑ 9)

## ุงูุฅุฌุงุจุฉ ุนูู ุงูุณุคุงู

### ุงูุณุคุงู: "ุงุชุฃูุฏ ูู ุฏุนู ุญุณุงุณ Magnetometers: QMC5883P ููู ููุฌุฏ ููู ูุดุงูู"

### ุงูุฅุฌุงุจุฉ:
**ูุนูุ ุญุณุงุณ QMC5883P ูุฏุนูู ุจุงููุงูู โ**

1. **ุงูุฏุนู ููุฌูุฏ**: ุงูุญุณุงุณ ููุทุจู ูู ุงูููุฏ ููุฏุฑุฌ ูู ูุงุฆูุฉ ุงูุญุณุงุณุงุช ุงููุฏุนููุฉ
2. **ุงูุชุทุจูู ุณููู**: ูู ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ููุฌูุฏุฉ ูููุทุจูุฉ ุจุดูู ุตุญูุญ
3. **ูุง ุชูุฌุฏ ูุดุงูู ุญุฑุฌุฉ**: ุงูุชุทุจูู ูุนูู ุจุดูู ุตุญูุญ ููุชุจุน ููุงุตูุงุช ุงูุญุณุงุณ

**ุงููุดุงูู ุงูุซุงูููุฉ (ุบูุฑ ุญุฑุฌุฉ)**:
- ุนุฏู ูุญุต ุณุฌู ุงูุญุงูุฉ ูุจู ุงููุฑุงุกุฉ (ุชุฃุซูุฑ ููุฎูุถ)
- ุนุฏู ุงุณุชุฎุฏุงู ุชุนููุถ ุงูุญุฑุงุฑุฉ (ุบูุฑ ุถุฑูุฑู ุนุงุฏุฉ)
- ุนุฏู ุงูุชุดุงู ุงูููุถ (ุงููุทุงู ุงูุงูุชุฑุงุถู ูุงูู)

**ุงูุชูุตูุฉ ุงูููุงุฆูุฉ**: ุงูุญุณุงุณ ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุฏูู ุฃู ูุดุงูู ูุนุฑููุฉ.

---
**ุขุฎุฑ ุชุญุฏูุซ**: 2026-01-02
**ุฅุตุฏุงุฑ ุงูุจุฑูุงูุฌ**: ุจูุงุกู ุนูู ุฃุญุฏุซ ูุฑุน ุฑุฆูุณู
**ุงูุญุงูุฉ**: ุชู ุงูุชุญูู ูุงูุชูุซูู
